[
  {
    "objectID": "tutorials.html",
    "href": "tutorials.html",
    "title": "Tutorials",
    "section": "",
    "text": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari\n\n\n\n\n\n\nCellpose\n\n\nTransfer learning\n\n\n\nTutorial for fine-tuning the “nuclei” model from cellpose to new data.\n\n\n\n\n\nFernando Cervantes\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "",
    "text": "Follow the instructions to install napari from its official website.\n\n\n\n\n\n\n\n\n\nImportant\n\n\n\nIf you installed napari using conda, activate that same environment before installing the Active Learning plugin.\n\n\nInstall the plugin adding [cellpose] to the command so all dependencies required for this tutorial are available.\npython -m pip install \"napari-activelearning[cellpose]\""
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#load-a-sample-image",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#load-a-sample-image",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.1. Load a sample image",
    "text": "2.1. Load a sample image\nYou can use the cells 3D image sample from napari’s built-in samples.\nFile &gt; Open Sample &gt; napari builtins &gt; Cells (3D+2Ch)"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#add-the-image-groups-manager-widget-to-naparis-window",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#add-the-image-groups-manager-widget-to-naparis-window",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.2. Add the Image Groups Manager widget to napari’s window",
    "text": "2.2. Add the Image Groups Manager widget to napari’s window\nThe Image groups manager can be found under the Active Learning plugin in napari’s plugins menu.\nPlugins &gt; Active Learning &gt; Image groups manager"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#create-an-image-group-containing-nuclei-and-membrane-layers",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#create-an-image-group-containing-nuclei-and-membrane-layers",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.3. Create an Image Group containing nuclei and membrane layers",
    "text": "2.3. Create an Image Group containing nuclei and membrane layers\n\nSelect the nuclei and membrane layer.\nClick the New Image Group button on the Image Groups Manager widget."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#edit-the-image-group-properties",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#edit-the-image-group-properties",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.4. Edit the image group properties",
    "text": "2.4. Edit the image group properties\n\n\n\nSelect the “images” channel group that has been created under the new image group.\n\n\n\n\n\n\n\nNote on image groups hierarchy\n\n\n\n\n\nThe hierarchical structure of groups within this plugin is the following:\n\nImage groups. Used to contain different modes of data, such as images, labels, masks, segmentation labels, etc.\n\nLayers groups. These group multiple layers together, and are intended to contain data from the same mode such different channel layers of the same image.\n\nLayer channels. This is directly related to a napari layer from the layer list widget, but allows to store additional information that is useful for the inference or fine-tuning process, such as the name and order of the axes.\n\n\n\n\n\n\n\nClick the Edit group properties checkbox.\nMake sure that Axes order is “CZYX”, otherwise, you can edit it and press Enter to update the axes names."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#add-the-acquisition-function-configuration-widget-to-naparis-window",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#add-the-acquisition-function-configuration-widget-to-naparis-window",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.1. Add the Acquisition function configuration widget to napari’s window",
    "text": "3.1. Add the Acquisition function configuration widget to napari’s window\nThe Acquisition function configuration is under the Active Learning plugin in napari’s plugins menu.\nPlugins &gt; Active Learning &gt; Acquisition function configuration\n\n\n\n\n\n\nTip\n\n\n\nAll Active Learning widgets can be un-docked from their current place and re-docked into other more convenient location within napari’s window, or even as tabs, as illustrated in this tutorial."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#define-sampling-configuration",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#define-sampling-configuration",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.2. Define sampling configuration",
    "text": "3.2. Define sampling configuration\n\n\n\nMake sure “Input axes” are set to “ZYX”.\n\n\n\n\n\n\n\nNote on Input axes\n\n\n\n\n\nThis enables edition of the patch size at those selected spatial axes.\nFor example, the “Cells (3D+2Ch)” sample image is three-dimensional, with “ZYX” spatial axes, and has two color channels. For that image we will extract two-dimensional patches of size \\(256\\times256\\) pixels, in the “X” and “Y” spatial axes.\nTherefore, “Input axes”=“ZYX” allows to set the patch size at spatial axes “Y” and “X” to \\(256\\) pixels, and “Z” to \\(1\\) in order to extract one-slice-deep patches.\n\n\n\n\nChange the “Model axes” to “CYX”.\n\n\n\n\n\n\n\nNote on Model axes\n\n\n\n\n\nThis, on the other hand, specifies the order our model expects to receive its inputs.\nIn his case, the nuclei model from cellpose will be applied to two-dimensional images. Because the “Z” axis is not used, we drop it from the “Model axes” string. This is only possible because the “Z” axis is already set to \\(1\\) slice deep and can be squeezed from the patch.\nAdditionally, we append the “C” (color channel) axis to the beginning of the string. That means that the order of the patch axes will be permuted to have the color channel as leading axis."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#set-the-size-of-the-sampling-patch",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#set-the-size-of-the-sampling-patch",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.3. Set the size of the sampling patch",
    "text": "3.3. Set the size of the sampling patch\n\n\n\n\n\n\n\n\n\n\n\n\n\nClick the “Edit patch size” checkbox\nChange the patch size of “X” and “Y” to 256, and the “Z” axis to 1.\n\n\n\n\n\n\n\nNote\n\n\n\nThis directs the Active Learning plugin to sample at random patches of size \\(256\\times256\\) pixels and \\(1\\) slice deep."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#sec-max-samples",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#sec-max-samples",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.4. Define the maximum number of samples to extract",
    "text": "3.4. Define the maximum number of samples to extract\n\n\n\n\n\n\n\n\n\n\n\n\n\nSet the “Maximum samples” to \\(4\\) and press Enter\n\n\n\n\n\n\n\nNote\n\n\n\nThis tells the Active Learning plugin to process at most four samples at random from the whole image.\nBecause the image is of size \\(256\\times256\\) pixels, four whole slices will be sampled at random for segmentation."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#configure-the-segmentation-method",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#configure-the-segmentation-method",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.5. Configure the segmentation method",
    "text": "3.5. Configure the segmentation method\n\n\n\nUse the “Model” dropdown list to select the cellpose method\nClick the “Advanced segmentation parameters” checkbox\nChange the “Channel axis” to \\(0\\)\n\n\n\n\n\n\n\nNote\n\n\n\nThis makes cellpose to use the first axis as “Color” channel, as we already set in “Model axes”=“CYX”.\n\n\n\nChange the second channel to \\(1\\) (the right spin box in the “channels” row)\n\n\n\n\n\n\n\nNote\n\n\n\nThis tells cellpose to segment the first channel (\\(0\\)) and use the second channel (\\(1\\)) as help channel.\n\n\n\nChoose the “nuclei” model from the dropdown list"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#execute-the-segmentation-method-on-all-image-groups",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#execute-the-segmentation-method-on-all-image-groups",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.6. Execute the segmentation method on all image groups",
    "text": "3.6. Execute the segmentation method on all image groups\n\n\n\nClick the “Run on all image groups” button\n\n\n\n\n\n\n\nNote\n\n\n\nTo execute the segmentation only on specific image groups, select the desired image groups in the Image groups manager widget and use the “Run on selected image groups” button instead."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#inspect-the-segmentation-layer",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#inspect-the-segmentation-layer",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.7. Inspect the segmentation layer",
    "text": "3.7. Inspect the segmentation layer\n\nWe will only see four segmented slices from the whole image. This is because we set the “Maximum samples” parameter to \\(4\\) in Section 3.4.\n\n\n\n\n\n\n\nNote\n\n\n\nBecause the input image is 3D, you may have to slide the “Z” index at the bottom of napari’s window to look at the samples that were segmented."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#create-a-mask-to-restrict-the-sampling-space",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#create-a-mask-to-restrict-the-sampling-space",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "4.1. Create a mask to restrict the sampling space",
    "text": "4.1. Create a mask to restrict the sampling space\n\n\n\nSwitch to the Image groups manager tab\nClick the “Edit mask properties” checkbox\nSet the mask scale to \\(256\\) for the “X” and “Y” axes, and a scale of \\(1\\) for the “Z” axis\nClick the “Create mask” button\n\n\n\n\n\n\n\nNote\n\n\n\nThis creates a low-resolution mask where each of its pixels corresponds to a \\(256\\times256\\) pixels region in the input image. Because the mask is low-resolution, it uses less space in memory and disk."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#specify-the-samplable-regions",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#specify-the-samplable-regions",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "4.2. Specify the samplable regions",
    "text": "4.2. Specify the samplable regions\n\n\n\nMake sure the newly created layer “images mask” is selected.\nActivate the paint brush tool (or press 2 or P keys in the keyboard as shortcuts).\nMove the “brush size” slider to set a size of \\(1\\) pixel in the mask scale. Because we set a scale of \\(256\\) on “X” and “Y” axis, this translates to a region of \\(256\\times256\\) pixels on the original image.\nClick and drag on the image to draw the mask on the current slice.\nMove the slider at the bottom of napari’s window to navigate between slices in the “Z” axis. Select slide \\(28\\) and draw on it as in step \\(4\\). Repeat with slices \\(29\\) and \\(30\\)."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#execute-the-segmentation-process-on-the-masked-regions-and-inspect-the-results",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#execute-the-segmentation-process-on-the-masked-regions-and-inspect-the-results",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "4.3. Execute the segmentation process on the masked regions and inspect the results",
    "text": "4.3. Execute the segmentation process on the masked regions and inspect the results\n\nRun again the segmentation process (clicking “Run on all image groups” button).\n\n\n\n\n\n\n\nImportant\n\n\n\nAll slices between \\(27\\) and \\(30\\) were picked and segmented thanks to the sampling mask!"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#add-the-label-groups-manager-widget-to-naparis-window",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#add-the-label-groups-manager-widget-to-naparis-window",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.1. Add the Label groups manager widget to napari’s window",
    "text": "5.1. Add the Label groups manager widget to napari’s window\nYou can find the Label groups manager under the Active Learning plugin in napari’s plugins menu.\nPlugins &gt; Active Learning &gt; Label groups manager"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#select-a-segmented-patch-to-edit",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#select-a-segmented-patch-to-edit",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.2. Select a segmented patch to edit",
    "text": "5.2. Select a segmented patch to edit\n\nDouble click on any of the segmented patches in the viewer (e.g. any slice between \\(27\\) and \\(30\\))\n\n\n\n\n\n\n\nNote\n\n\n\nThis creates a new editable “Labels edit” layer with a copy of the selected patch."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#use-naparis-layer-controls-to-make-changes-on-the-objects-of-the-current-patch",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#use-naparis-layer-controls-to-make-changes-on-the-objects-of-the-current-patch",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.3. Use napari’s layer controls to make changes on the objects of the current patch",
    "text": "5.3. Use napari’s layer controls to make changes on the objects of the current patch\n\n\n\n\n\n\nTip\n\n\n\nYou can follow this tutorial to learn how to use the annotation tools in napari."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#commit-changes-to-the-labels-layer",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#commit-changes-to-the-labels-layer",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.4. Commit changes to the labels layer",
    "text": "5.4. Commit changes to the labels layer\n\nOnce you have finished editing the labels, click the “Commit changes” button on the Label groups manager"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#navigate-between-segmented-patches",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#navigate-between-segmented-patches",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.5. Navigate between segmented patches",
    "text": "5.5. Navigate between segmented patches\n\n\n\nExpand the second group of labels\nDouble-click on any of the nested items to open it for editing\nUse the navigation buttons to move between segmented patches\nContinue editing the segmentation in the current patch and commit the changes when finished\nRepeat this with each of the segmented patches.\n\n\n\n\n\n\n\nNote\n\n\n\nEvery time we run the segmentation process, a new group of labels is added to the Label groups manager."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#setup-fine-tuning-configuration",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#setup-fine-tuning-configuration",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.6. Setup fine tuning configuration",
    "text": "5.6. Setup fine tuning configuration\n\n\n\nGo to the Acquisition function configuration widget\nClick the “Advanced fine tuning parameters” checkbox\nChange the “save path” to a location where you want to store the fine tuned model"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#setup-fine-tuning-configuration-1",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#setup-fine-tuning-configuration-1",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.6. Setup fine tuning configuration",
    "text": "5.6. Setup fine tuning configuration\n\n\n\nChange the “model name” to “nuclei_ft”\n\n\n\n\n\n\n\nTip\n\n\n\nScroll the Advanced fine tuning parameters widget down to show more parameters.\n\n\n\nSet the “batch size” to \\(3\\)\nChange the “learning rate” to \\(0.0001\\)\n\n\n\n\n\n\n\nTip\n\n\n\nYou can modify other parameters for the training process here, such as the number of training epochs."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#execute-the-fine-tuning-process",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#execute-the-fine-tuning-process",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.7. Execute the fine tuning process",
    "text": "5.7. Execute the fine tuning process\n\n\n\nClick the “Fine tune model” button to run the training process.\n\n\n\n\n\n\n\nCaution\n\n\n\nDepending on your computer resources (RAM, CPU), this process might take some minutes to complete. If you have a dedicated GPU device, this can take a couple of seconds instead."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#review-the-fine-tuned-segmentation",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#review-the-fine-tuned-segmentation",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.8. Review the fine tuned segmentation",
    "text": "5.8. Review the fine tuned segmentation\n\n\n\n\n\n\nTip\n\n\n\nUse the opacity slider to compare how the fine tuned model segments the same objects that were labeled for training."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#create-a-mask-to-apply-the-fine-tuned-model-for-inference",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#create-a-mask-to-apply-the-fine-tuned-model-for-inference",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.1. Create a mask to apply the fine tuned model for inference",
    "text": "6.1. Create a mask to apply the fine tuned model for inference\n\n\n\nFollow the steps from Section 4 to create a mask, now covering slices \\(31\\) to \\(34\\).\nScroll down the Image groups manager tree to show the newest mask layer grup (“mask (1)”).\nSelect the “mask (1)” layer group\n\n\n\n\n\n\n\nTip\n\n\n\nThe “Group name” column in the groups tree can be resized to show the complete names.\n\n\n\nMake sure that “Use as sampling mask” checkbox is checked.\nClick “Run on all image groups” button in the Acquisition function configuration widget again."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#inspect-the-output-of-the-fine-tuned-model",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#inspect-the-output-of-the-fine-tuned-model",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.2. Inspect the output of the fine tuned model",
    "text": "6.2. Inspect the output of the fine tuned model\n\nNow you have a fine tuned model for nuclei segmentation that has been adapted to this image!\n\n\n\n\n\n\n\nImportant\n\n\n\nThe fine tuned model can be used in Cellpose’s GUI software, their python API package, or any other package that supports pretrained cellpose models."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#segment-the-newly-masked-region-with-the-base-model-for-comaprison",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#segment-the-newly-masked-region-with-the-base-model-for-comaprison",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.3. Segment the newly masked region with the base model for comaprison",
    "text": "6.3. Segment the newly masked region with the base model for comaprison\n\n\n\nChoose the “nuclei” model again from the dropdown list in the Advanced segmentation parameters section\nClick the “Run on all image groups” button again\n\n\n\n\n\n\n\nNote\n\n\n\nThis will execute the segmentation process with the non-fine-tuned “nuclei” model on the same sampling positions from the last run."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial.html#compare-the-results-of-both-models",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial.html#compare-the-results-of-both-models",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.4. Compare the results of both models",
    "text": "6.4. Compare the results of both models\n\nHide all the layers except the “nuclei” and “membrane” layers, and the “images segmentation [2]” and “images segmentation [3]” layers, that are the segmentation outputs from the fine-tuned model and base model, respectively.\n\n\n\n\n\n\n\nTip\n\n\n\nClick the eye icon in the “layer list” to hide/show layers."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#load-a-sample-image",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#load-a-sample-image",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.1. Load a sample image",
    "text": "2.1. Load a sample image\nYou can use the cells 3D image sample from napari’s built-in samples.\nFile &gt; Open Sample &gt; napari builtins &gt; Cells (3D+2Ch)"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#add-the-image-groups-manager-widget-to-naparis-window",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#add-the-image-groups-manager-widget-to-naparis-window",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.2. Add the Image Groups Manager widget to napari’s window",
    "text": "2.2. Add the Image Groups Manager widget to napari’s window\nThe Image groups manager can be found under the Active Learning plugin in napari’s plugins menu.\nPlugins &gt; Active Learning &gt; Image groups manager"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#create-an-image-group-containing-nuclei-and-membrane-layers",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#create-an-image-group-containing-nuclei-and-membrane-layers",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.3. Create an Image Group containing nuclei and membrane layers",
    "text": "2.3. Create an Image Group containing nuclei and membrane layers\n\nSelect the nuclei and membrane layer.\nClick the New Image Group button on the Image Groups Manager widget."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#edit-the-image-group-properties",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#edit-the-image-group-properties",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "2.4. Edit the image group properties",
    "text": "2.4. Edit the image group properties\n\n\n\nSelect the “images” channel group that has been created under the new image group.\n\n\n\n\n\n\n\n\nNote on image groups hierarchy\n\n\nThe hierarchical structure of groups within this plugin is the following:\n\nImage groups. Used to contain different modes of data, such as images, labels, masks, segmentation labels, etc.\n\nLayers groups. These group multiple layers together, and are intended to contain data from the same mode such different channel layers of the same image.\n\nLayer channels. This is directly related to a napari layer from the layer list widget, but allows to store additional information that is useful for the inference or fine-tuning process, such as the name and order of the axes.\n\n\n\n\n\n\n\n\nClick the Edit group properties checkbox.\nMake sure that Axes order is “CZYX”, otherwise, you can edit it and press Enter to update the axes names."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#add-the-acquisition-function-configuration-widget-to-naparis-window",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#add-the-acquisition-function-configuration-widget-to-naparis-window",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.1. Add the Acquisition function configuration widget to napari’s window",
    "text": "3.1. Add the Acquisition function configuration widget to napari’s window\nThe Acquisition function configuration is under the Active Learning plugin in napari’s plugins menu.\nPlugins &gt; Active Learning &gt; Acquisition function configuration\n\n\n\n\n\n\nTip\n\n\nAll Active Learning widgets can be un-docked from their current place and re-docked into other more convenient location within napari’s window, or even as tabs, as illustrated in this tutorial."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#define-sampling-configuration",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#define-sampling-configuration",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.2. Define sampling configuration",
    "text": "3.2. Define sampling configuration\n\n\n\nMake sure “Input axes” are set to “ZYX”.\n\n\n\n\n\n\n\n\nNote on Input axes\n\n\nThis enables edition of the patch size at those selected spatial axes.\nFor example, the “Cells (3D+2Ch)” sample image is three-dimensional, with “ZYX” spatial axes, and has two color channels. For that image we will extract two-dimensional patches of size \\(256\\times256\\) pixels, in the “X” and “Y” spatial axes.\nTherefore, “Input axes”=“ZYX” allows to set the patch size at spatial axes “Y” and “X” to \\(256\\) pixels, and “Z” to \\(1\\) in order to extract one-slice-deep patches.\n\n\n\n\n\nChange the “Model axes” to “CYX”.\n\n\n\n\n\n\n\n\nNote on Model axes\n\n\nThis, on the other hand, specifies the order our model expects to receive its inputs.\nIn his case, the nuclei model from cellpose will be applied to two-dimensional images. Because the “Z” axis is not used, we drop it from the “Model axes” string. This is only possible because the “Z” axis is already set to \\(1\\) slice deep and can be squeezed from the patch.\nAdditionally, we append the “C” (color channel) axis to the beginning of the string. That means that the order of the patch axes will be permuted to have the color channel as leading axis."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#set-the-size-of-the-sampling-patch",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#set-the-size-of-the-sampling-patch",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.3. Set the size of the sampling patch",
    "text": "3.3. Set the size of the sampling patch\n\n\n\n\n\n\n\n\n\n\n\n\n\nClick the “Edit patch size” checkbox\nChange the patch size of “X” and “Y” to 256, and the “Z” axis to 1.\n\n\n\n\n\n\n\nNote\n\n\nThis directs the Active Learning plugin to sample at random patches of size \\(256\\times256\\) pixels and \\(1\\) slice deep."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#sec-max-samples",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#sec-max-samples",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.4. Define the maximum number of samples to extract",
    "text": "3.4. Define the maximum number of samples to extract\n\n\n\n\n\n\n\n\n\n\n\n\n\nSet the “Maximum samples” to \\(4\\) and press Enter\n\n\n\n\n\n\n\nNote\n\n\nThis tells the Active Learning plugin to process at most four samples at random from the whole image.\nBecause the image is of size \\(256\\times256\\) pixels, four whole slices will be sampled at random for segmentation."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#configure-the-segmentation-method",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#configure-the-segmentation-method",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.5. Configure the segmentation method",
    "text": "3.5. Configure the segmentation method\n\n\n\nUse the “Model” dropdown list to select the cellpose method\nClick the “Advanced segmentation parameters” checkbox\nChange the “Channel axis” to \\(0\\)\n\n\n\n\n\n\n\nNote\n\n\nThis makes cellpose to use the first axis as “Color” channel, as we already set in “Model axes”=“CYX”.\n\n\n\n\nChange the second channel to \\(1\\) (the right spin box in the “channels” row)\n\n\n\n\n\n\n\nNote\n\n\nThis tells cellpose to segment the first channel (\\(0\\)) and use the second channel (\\(1\\)) as help channel.\n\n\n\n\nChoose the “nuclei” model from the dropdown list"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#execute-the-segmentation-method-on-all-image-groups",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#execute-the-segmentation-method-on-all-image-groups",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.6. Execute the segmentation method on all image groups",
    "text": "3.6. Execute the segmentation method on all image groups\n\n\n\nClick the “Run on all image groups” button\n\n\n\n\n\n\n\nNote\n\n\nTo execute the segmentation only on specific image groups, select the desired image groups in the Image groups manager widget and use the “Run on selected image groups” button instead."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#inspect-the-segmentation-layer",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#inspect-the-segmentation-layer",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "3.7. Inspect the segmentation layer",
    "text": "3.7. Inspect the segmentation layer\n\nWe will only see four segmented slices from the whole image. This is because we set the “Maximum samples” parameter to \\(4\\) in Section 3.4.\n\n\n\n\n\n\n\nNote\n\n\nBecause the input image is 3D, you may have to slide the “Z” index at the bottom of napari’s window to look at the samples that were segmented."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#create-a-mask-to-restrict-the-sampling-space",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#create-a-mask-to-restrict-the-sampling-space",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "4.1. Create a mask to restrict the sampling space",
    "text": "4.1. Create a mask to restrict the sampling space\n\n\n\nSwitch to the Image groups manager tab\nClick the “Edit mask properties” checkbox\nSet the mask scale to \\(256\\) for the “X” and “Y” axes, and a scale of \\(1\\) for the “Z” axis\nClick the “Create mask” button\n\n\n\n\n\n\n\nNote\n\n\nThis creates a low-resolution mask where each of its pixels corresponds to a \\(256\\times256\\) pixels region in the input image. Because the mask is low-resolution, it uses less space in memory and disk."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#specify-the-samplable-regions",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#specify-the-samplable-regions",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "4.2. Specify the samplable regions",
    "text": "4.2. Specify the samplable regions\n\n\n\nMake sure the newly created layer “images mask” is selected.\nActivate the paint brush tool (or press 2 or P keys in the keyboard as shortcuts).\nMove the “brush size” slider to set a size of \\(1\\) pixel in the mask scale. Because we set a scale of \\(256\\) on “X” and “Y” axis, this translates to a region of \\(256\\times256\\) pixels on the original image.\nClick and drag on the image to draw the mask on the current slice.\nMove the slider at the bottom of napari’s window to navigate between slices in the “Z” axis. Select slide \\(28\\) and draw on it as in step \\(4\\). Repeat with slices \\(29\\) and \\(30\\)."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#execute-the-segmentation-process-on-the-masked-regions-and-inspect-the-results",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#execute-the-segmentation-process-on-the-masked-regions-and-inspect-the-results",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "4.3. Execute the segmentation process on the masked regions and inspect the results",
    "text": "4.3. Execute the segmentation process on the masked regions and inspect the results\n\nRun again the segmentation process (clicking “Run on all image groups” button).\n\n\n\n\n\n\n\nImportant\n\n\nAll slices between \\(27\\) and \\(30\\) were picked and segmented thanks to the sampling mask!"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#add-the-label-groups-manager-widget-to-naparis-window",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#add-the-label-groups-manager-widget-to-naparis-window",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.1. Add the Label groups manager widget to napari’s window",
    "text": "5.1. Add the Label groups manager widget to napari’s window\nYou can find the Label groups manager under the Active Learning plugin in napari’s plugins menu.\nPlugins &gt; Active Learning &gt; Label groups manager"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#select-a-segmented-patch-to-edit",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#select-a-segmented-patch-to-edit",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.2. Select a segmented patch to edit",
    "text": "5.2. Select a segmented patch to edit\n\nDouble click on any of the segmented patches in the viewer (e.g. any slice between \\(27\\) and \\(30\\))\n\n\n\n\n\n\n\nNote\n\n\nThis creates a new editable “Labels edit” layer with a copy of the selected patch."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#use-naparis-layer-controls-to-make-changes-on-the-objects-of-the-current-patch",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#use-naparis-layer-controls-to-make-changes-on-the-objects-of-the-current-patch",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.3. Use napari’s layer controls to make changes on the objects of the current patch",
    "text": "5.3. Use napari’s layer controls to make changes on the objects of the current patch\n\n\n\n\n\n\nTip\n\n\nYou can follow this tutorial to learn how to use the annotation tools in napari."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#commit-changes-to-the-labels-layer",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#commit-changes-to-the-labels-layer",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.4. Commit changes to the labels layer",
    "text": "5.4. Commit changes to the labels layer\n\nOnce you have finished editing the labels, click the “Commit changes” button on the Label groups manager"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#navigate-between-segmented-patches",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#navigate-between-segmented-patches",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.5. Navigate between segmented patches",
    "text": "5.5. Navigate between segmented patches\n\n\n\nExpand the second group of labels\nDouble-click on any of the nested items to open it for editing\nUse the navigation buttons to move between segmented patches\nContinue editing the segmentation in the current patch and commit the changes when finished\nRepeat this with each of the segmented patches.\n\n\n\n\n\n\n\nNote\n\n\nEvery time we run the segmentation process, a new group of labels is added to the Label groups manager."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#setup-fine-tuning-configuration",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#setup-fine-tuning-configuration",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.6. Setup fine tuning configuration",
    "text": "5.6. Setup fine tuning configuration\n\n\n\nGo to the Acquisition function configuration widget\nClick the “Advanced fine tuning parameters” checkbox\nChange the “save path” to a location where you want to store the fine tuned model"
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#setup-fine-tuning-configuration-1",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#setup-fine-tuning-configuration-1",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.6. Setup fine tuning configuration",
    "text": "5.6. Setup fine tuning configuration\n\n\n\nChange the “model name” to “nuclei_ft”\n\n\n\n\n\n\n\nTip\n\n\nScroll the Advanced fine tuning parameters widget down to show more parameters.\n\n\n\n\nSet the “batch size” to \\(3\\)\nChange the “learning rate” to \\(0.0001\\)\n\n\n\n\n\n\n\nTip\n\n\nYou can modify other parameters for the training process here, such as the number of training epochs."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#execute-the-fine-tuning-process",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#execute-the-fine-tuning-process",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.7. Execute the fine tuning process",
    "text": "5.7. Execute the fine tuning process\n\n\n\nClick the “Fine tune model” button to run the training process.\n\n\n\n\n\n\n\nCaution\n\n\nDepending on your computer resources (RAM, CPU), this process might take some minutes to complete. If you have a dedicated GPU device, this can take a couple of seconds instead."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#review-the-fine-tuned-segmentation",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#review-the-fine-tuned-segmentation",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "5.8. Review the fine tuned segmentation",
    "text": "5.8. Review the fine tuned segmentation\n\n\n\n\n\n\nTip\n\n\nUse the opacity slider to compare how the fine tuned model segments the same objects that were labeled for training."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#create-a-mask-to-apply-the-fine-tuned-model-for-inference",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#create-a-mask-to-apply-the-fine-tuned-model-for-inference",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.1. Create a mask to apply the fine tuned model for inference",
    "text": "6.1. Create a mask to apply the fine tuned model for inference\n\n\n\nFollow the steps from Section 4 to create a mask, now covering slices \\(31\\) to \\(34\\).\nScroll down the Image groups manager tree to show the newest mask layer grup (“mask (1)”).\nSelect the “mask (1)” layer group\n\n\n\n\n\n\n\nTip\n\n\nThe “Group name” column in the groups tree can be resized to show the complete names.\n\n\n\n\nMake sure that “Use as sampling mask” checkbox is checked.\nClick “Run on all image groups” button in the Acquisition function configuration widget again."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#inspect-the-output-of-the-fine-tuned-model",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#inspect-the-output-of-the-fine-tuned-model",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.2. Inspect the output of the fine tuned model",
    "text": "6.2. Inspect the output of the fine tuned model\n\nNow you have a fine tuned model for nuclei segmentation that has been adapted to this image!\n\n\n\n\n\n\n\nImportant\n\n\nThe fine tuned model can be used in Cellpose’s GUI software, their python API package, or any other package that supports pretrained cellpose models."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#segment-the-newly-masked-region-with-the-base-model-for-comaprison",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#segment-the-newly-masked-region-with-the-base-model-for-comaprison",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.3. Segment the newly masked region with the base model for comaprison",
    "text": "6.3. Segment the newly masked region with the base model for comaprison\n\n\n\nChoose the “nuclei” model again from the dropdown list in the Advanced segmentation parameters section\nClick the “Run on all image groups” button again\n\n\n\n\n\n\n\nNote\n\n\nThis will execute the segmentation process with the non-fine-tuned “nuclei” model on the same sampling positions from the last run."
  },
  {
    "objectID": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#compare-the-results-of-both-models",
    "href": "tutorials/cellpose_tutorial/cellpose_tutorial_presentation.html#compare-the-results-of-both-models",
    "title": "Tutorial: How to fine tune a Cellpose model with the Active Learning plugin for Napari",
    "section": "6.4. Compare the results of both models",
    "text": "6.4. Compare the results of both models\n\nHide all the layers except the “nuclei” and “membrane” layers, and the “images segmentation [2]” and “images segmentation [3]” layers, that are the segmentation outputs from the fine-tuned model and base model, respectively.\n\n\n\n\n\n\n\nTip\n\n\nClick the eye icon in the “layer list” to hide/show layers."
  }
]